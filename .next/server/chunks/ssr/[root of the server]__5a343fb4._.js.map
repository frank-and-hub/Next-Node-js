{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///home/frnk/GitHub/Next-Node-js/components/utils/api.js"],"sourcesContent":["import axios from 'axios'\nimport config from '../config'\nconst baseUrl = config.reactApiUrl;\n\nconst api = axios.create({\n  baseURL: baseUrl,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token') ?? null;\n  if (token) {\n    // console.info('👍');\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n},\n  (error) => {\n    // console.info('👎');\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"names":[],"mappings":";;;AAAA;;;;;;;;;;;;AAEA,MAAM,UAAU,OAAO,WAAW;AAElC,MAAM,MAAM,0GAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC,YAAY;IAC/C,IAAI,OAAO;QACT,sBAAsB;QACtB,QAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACrD;IACA,OAAO;AACT,GACE,CAAC;IACC,sBAAsB;IACtB,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///home/frnk/GitHub/Next-Node-js/components/utils/AxiosUtils.js"],"sourcesContent":["import api from './api'\nimport config from '../config'\n\nconst baseUrl = config.reactApiUrl;\nconst token = localStorage.getItem('token');\n\nconst request = async (method, url, data = {}) => {\n    try {\n        const config = {\n            method,\n            url: baseUrl + url,\n            headers: { ...(token && { Authorization: `Bearer ${token}` }), },\n            data: method !== 'get' ? data : undefined,\n        };\n        // console.time(method.toUpperCase())\n        const res = await api(config)\n        // console.info(`Successfully received data via ${method.toUpperCase()} method requested to ${url}.`)\n        // console.clear()\n        return res?.data\n    } catch (err) {\n        console.error(`Error during the ${method.toUpperCase()} request to ${url} : ${err.status}`);\n        if (err.status === 401)  localStorage.clear();\n        throw err.response;\n    } finally {\n        // console.trace()\n        // console.timeEnd(config)\n    }\n};\n\nconst get = (url) => request('get', url, {});\nconst post = (url, data) => request('post', url, data);\nconst put = (url, data) => request('put', url, data);\nconst patch = (url, data) => request('patch', url, data);\nconst destroy = (url) => request('delete', url, {});\n\n// Exporting all methods for easy import in other components\nexport { get, post, put, patch, destroy }"],"names":[],"mappings":";;;;;;;AAAA;;;;;;;;;;;;AAGA,MAAM,UAAU,OAAO,WAAW;AAClC,MAAM,QAAQ,aAAa,OAAO,CAAC;AAEnC,MAAM,UAAU,OAAO,QAAQ,KAAK,OAAO,CAAC,CAAC;IACzC,IAAI;QACA,MAAM,UAAS;YACX;YACA,KAAK,UAAU;YACf,SAAS;gBAAE,GAAI,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC,CAAC;YAAG;YAC/D,MAAM,WAAW,QAAQ,OAAO;QACpC;QACA,qCAAqC;QACrC,MAAM,MAAM,MAAM,CAAA,GAAA,mHAAA,CAAA,UAAG,AAAD,EAAE;QACtB,qGAAqG;QACrG,kBAAkB;QAClB,OAAO,KAAK;IAChB,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,CAAC,iBAAiB,EAAE,OAAO,WAAW,GAAG,YAAY,EAAE,IAAI,GAAG,EAAE,IAAI,MAAM,EAAE;QAC1F,IAAI,IAAI,MAAM,KAAK,KAAM,aAAa,KAAK;QAC3C,MAAM,IAAI,QAAQ;IACtB,SAAU;IACN,kBAAkB;IAClB,0BAA0B;IAC9B;AACJ;AAEA,MAAM,MAAM,CAAC,MAAQ,QAAQ,OAAO,KAAK,CAAC;AAC1C,MAAM,OAAO,CAAC,KAAK,OAAS,QAAQ,QAAQ,KAAK;AACjD,MAAM,MAAM,CAAC,KAAK,OAAS,QAAQ,OAAO,KAAK;AAC/C,MAAM,QAAQ,CAAC,KAAK,OAAS,QAAQ,SAAS,KAAK;AACnD,MAAM,UAAU,CAAC,MAAQ,QAAQ,UAAU,KAAK,CAAC","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///home/frnk/GitHub/Next-Node-js/components/store/authSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  user: null,\n  token: null,\n  isAuthenticated: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    setUser: (state, action) => {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isAuthenticated = true;\n    },\n    clearUser: (state) => {\n      state.user = null;\n      state.token = null;\n      state.isAuthenticated = false;\n    },\n  },\n});\n\nexport const { setUser, clearUser } = authSlice.actions;\n\nexport default authSlice.reducer;\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,MAAM,eAAe;IACnB,MAAM;IACN,OAAO;IACP,iBAAiB;AACnB;AAEA,MAAM,YAAY,YAAY;IAC5B,MAAM;IACN;IACA,UAAU;QACR,SAAS,CAAC,OAAO;YACf,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,eAAe,GAAG;QAC1B;QACA,WAAW,CAAC;YACV,MAAM,IAAI,GAAG;YACb,MAAM,KAAK,GAAG;YACd,MAAM,eAAe,GAAG;QAC1B;IACF;AACF;AAEO,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,UAAU,OAAO;uCAExC,UAAU,OAAO","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/frnk/GitHub/Next-Node-js/components/utils/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext, useMemo, useCallback } from 'react'\nimport api from './api'\nimport config from '../config'\nimport { get } from './AxiosUtils'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setUser, clearUser } from './../store/authSlice'\nimport { notifyError } from '../components/admin/comman/notification/Notification'\n\nconst AuthContext = createContext();\nconst url = config.reactApiUrl;\nexport const AuthProvider = ({ children }) => {\n\n    const dispatch = useDispatch();\n    const [loading, setLoading] = useState(false);\n\n    const isLoggedIn = useSelector((state) => (state.auth.isAuthenticated));\n    const user = useSelector((state) => (state.auth.user));\n    const token = useSelector((state) => (state.auth.token)) ?? localStorage.getItem('token');\n    // const token = localStorage.getItem('token');\n\n    const EXPIRATION_TIME = 60 * 60 * 1000; // 3600000 // 1 hour\n\n    const isTokenExpired = () => {\n        const expiry_time = localStorage?.getItem('expiry_time');\n        return expiry_time ? Date.now() > parseInt(expiry_time, 10) : true;\n    };\n\n    const storeUserData = useCallback(async (data, token) => {\n        const expiry_time = Date.now() + EXPIRATION_TIME;\n        dispatch(setUser({ user: data, token: token }));\n        localStorage.setItem('expiry_time', expiry_time.toString());\n    }, [dispatch, EXPIRATION_TIME]);\n\n    const clearUserData = useCallback(async () => {\n        await dispatch(clearUser());\n        localStorage.clear();\n        console.trace();\n        console.info('Logged out... 👋');\n    }, [dispatch]);\n\n    const register = useCallback(async (name, email, password, phone) => {\n        try {\n            const { data } = await api.post(`${url}/sign-up`, { name, email, password, phone });\n            return data;\n        } catch (error) {\n            notifyError('Registration error:', error);\n            throw error;\n        }\n    }, []);\n\n    const login = useCallback(async (email, password) => {\n        try {\n            const { data } = await api.post(`${url}/sign-in`, { email, password });\n            await storeUserData(data.user, data?.token);\n            localStorage.setItem('token', data?.token);\n            localStorage.setItem('user', data?.user);\n            localStorage.setItem('role', data?.user?.role?.name);\n            localStorage.setItem('user_id', data?.user?._id);\n            return data;\n        } catch (err) {\n            notifyError(`Login error: ${err.message}`);\n            throw err;\n        }\n    }, [storeUserData]);\n\n    const logout = useCallback(async () => {\n        await clearUserData();\n    }, [clearUserData]);\n\n    const deepEqual = useCallback((obj1, obj2) => {\n        if (obj1 === obj2) return true;\n\n        if (typeof obj1 !== 'object' || typeof obj2 !== 'object' || obj1 == null || obj2 == null) {\n            return false;\n        }\n\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n\n        if (keys1.length !== keys2.length) return false;\n\n        for (let key of keys1) {\n            if (!keys2.includes(key) || !deepEqual(obj1[key], obj2[key])) {\n                return false;\n            }\n        }\n\n        return true;\n    }, []);\n\n    const loadUser = useCallback(async () => {\n        if (token && user) {\n            try {\n                const { data } = await get(`/users/${user._id}`, token);\n                if (!deepEqual(data, user)) {\n                    dispatch(setUser({ user: data, token: data.token }));\n                }\n            } catch (err) {\n                console.error(err.message);\n                logout();\n            }\n        }\n        setLoading(false)\n    }, [token, user, dispatch, deepEqual, logout]);\n\n    useEffect(() => {\n        if (isTokenExpired()) {\n            console.error(`Token expired!`);\n            logout();\n        } else {\n            loadUser();\n        }\n    }, [logout, loadUser]);\n\n    const contextValue = useMemo(() => ({\n        user,\n        register,\n        login,\n        logout,\n        loadUser,\n        isLoggedIn,\n        loading,\n    }), [user, register, login, logout, loadUser, isLoggedIn, loading]);\n\n    return (\n        <AuthContext.Provider value={contextValue}>\n            {!loading && children}\n        </AuthContext.Provider >\n    );\n};\n\nexport const useAuth = () => useContext(AuthContext);"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 365, "column": 0}, "map": {"version":3,"sources":["file:///home/frnk/GitHub/Next-Node-js/pages/_app.tsx"],"sourcesContent":["import \"@/styles/globals.css\";\nimport type { AppProps } from \"next/app\";\nimport { AuthProvider } from '@/utils/AuthContext';\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return (\n    <>\n      <AuthProvider>\n        <Component {...pageProps} />\n      </AuthProvider>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;;;;;;AAEe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAY;IAC5D,qBACE;kBACE,cAAA,qKAAC,2HAAA,CAAA,eAAY;sBACX,cAAA,qKAAC;gBAAW,GAAG,SAAS;;;;;;;;;;;;AAIhC","debugId":null}}]
}